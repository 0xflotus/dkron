<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        <meta name="author" content="Victor Castell">
        <link rel="canonical" href="http://dkron.io/docs/api/">
        <link rel="shortcut icon" href="../../img/favicon.ico">

	<title>Api - Dkron - Distributed, fault tolerant job scheduling system</title>

        <link href="../../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../../css/font-awesome-4.0.3.css" rel="stylesheet">
        <link rel="stylesheet" href="../../css/highlight.css">
        <link href="../../css/app.css" rel="stylesheet">

        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

        
        <script>
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
            ga('create', 'UA-571371-14', 'dkron.io');
            ga('send', 'pageview');
        </script>
        
    </head>

    <body class=" with-toc">

            <div class="navbar navbar-default navbar-fixed-top" role="navigation">
        <div class="container">

            <!-- Collapsed navigation -->
            <div class="navbar-header">
                <!-- Expander button -->
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>

                <!-- Main title -->
                <div class="brand">
                    <a class="logo" href="../..">Dkron</a>
                </div>
            </div>

            <!-- Expanded navigation -->
            <div class="navbar-collapse collapse">
                <!-- Main navigation -->
                <ul class="main-links nav navbar-nav">
                
                
                    <li >
                        <a href="../..">Home</a>
                    </li>
                
                
                
                    <li >
                        <a href="../../intro/">Intro</a>
                    </li>
                
                
                
                    <li class="dropdown active">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Docs <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            <li >
                                <a href="../getting-started/">Getting started</a>
                            </li>
                        
                            <li >
                                <a href="../configuration/">Configuration</a>
                            </li>
                        
                            <li class="active">
                                <a href="./">Api</a>
                            </li>
                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">About <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            <li >
                                <a href="../../about/dkron_vs_other_software/">Dkron vs other software</a>
                            </li>
                        
                            <li >
                                <a href="../../about/license/">License</a>
                            </li>
                        
                        </ul>
                    </li>
                
                
                </ul>

                <!-- Search, Navigation and Repo links -->
                <ul class="nav navbar-nav navbar-right">

                    

                    <li >
                        <a rel="next" href="../configuration/">
                            <i class="fa fa-arrow-left"></i> Previous
                        </a>
                    </li>
                    <li >
                        <a rel="prev" href="../../about/dkron_vs_other_software/">
                            Next <i class="fa fa-arrow-right"></i>
                        </a>
                    </li>

                    

                    <li>
                        <a href="https://twitter.com/dkronio">
                          <i class="fa fa-twitter fa-lg"></i>
                          Follow
                        </a>
                    </li>

                    <li>
                        <a href="https://github.com/victorcoder/dkron/releases">
                          <i class="fa fa-cloud-download fa-lg"></i>
                          Download
                        </a>
                    </li>

                    
                    <li>
                        <a href="https://github.com/victorcoder/dkron">
                            <i class="fa fa-github fa-lg"></i>
                            GitHub
                        </a>
                    </li>
                    
                </ul>
            </div>
        </div>
    </div>

        
            

              <div class="container">
                <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
    
        <li class="main active"><a href="#rest-api">REST API</a></li>
        
            <li><a href="#leaders">Leaders</a></li>
        
            <li><a href="#index">Index</a></li>
        
            <li><a href="#members">Members</a></li>
        
            <li><a href="#leader">Leader</a></li>
        
            <li><a href="#get-jobs">Get Jobs</a></li>
        
            <li><a href="#create-or-update-a-job">Create or update a Job</a></li>
        
            <li><a href="#deleting-a-job">Deleting a Job</a></li>
        
            <li><a href="#manually-starting-a-job">Manually Starting a Job</a></li>
        
            <li><a href="#get-job-executions">Get job executions</a></li>
        
    
    </ul>
</div></div>
                <div class="col-md-9" role="main">

<h1 id="rest-api">REST API</h1>
<p>You can communicate with dkron using a RESTful JSON API over HTTP. dkron nodes usually listen on port 8080 for API requests. All examples in this section assume that you've found a running leader at dkron-node:8080.</p>
<p>dkron implements a RESTful JSON API over HTTP to communicate with software clients. dkron listens in port 8080 by default. All examples in this section assume that you're using the default port.</p>
<p><a href="#leaders">Leaders</a></p>
<h2 id="leaders">Leaders</h2>
<p>When you have multiple dkron nodes in server mode running, only one of them will be elected as the leader. In dkron you can talk to any node running in server mode all of them could handle your request but only the leader will actually run the scheduler.</p>
<h2 id="index">Index</h2>
<ul>
<li>Endpoint: <code>/v1</code></li>
<li>Method: <code>GET</code></li>
<li>Example: <code>curl -XGET dkron-node:8080/v1</code></li>
</ul>
<p>Returns info about the agent queried.</p>
<h2 id="members">Members</h2>
<ul>
<li>Endpoint: <code>/v1/members</code></li>
<li>Method: <code>GET</code></li>
<li>Example: <code>curl -XGET dkron-node:8080/v1/members</code></li>
</ul>
<p>Returns the cluster member list.</p>
<h2 id="leader">Leader</h2>
<ul>
<li>Endpoint: <code>/v1/leader</code></li>
<li>Method: <code>GET</code></li>
<li>Example: <code>curl -XGET dkron-node:8080/v1/leader</code></li>
</ul>
<p>Returns details about the current leader.</p>
<h2 id="get-jobs">Get Jobs</h2>
<ul>
<li>Endpoint: <code>/v1/jobs</code></li>
<li>Method: <code>GET</code></li>
<li>Example: <code>curl -L -X GET dkron-node:8080/v1/jobs</code></li>
</ul>
<h2 id="create-or-update-a-job">Create or update a Job</h2>
<p>Creates a new job or updates an exsiting job based on it's <code>name</code>. The <code>schedule</code> can be any valid cron expression or an interval using the <code>@every Xs</code> format.</p>
<ul>
<li>Endpoint: <code>/v1/jobs/</code></li>
<li>Method: <code>POST</code> or <code>PUT</code></li>
<li>Example: <code>curl -X POST dkron-node:8080/v1/jobs/ -d @jobs.json</code></li>
</ul>
<p>Sample job:</p>
<pre><code>{
   &quot;name&quot;:&quot;cron_job&quot;,
   &quot;schedule&quot;:&quot;@every 2s&quot;,
   &quot;command&quot;:&quot;date&quot;,
   &quot;owner&quot;:&quot;foo&quot;,
   &quot;owner_email&quot;:&quot;foo@bar.com&quot;
}
</code></pre>

<h2 id="deleting-a-job">Deleting a Job</h2>
<p>Get a job name from the job listing above. Then:</p>
<ul>
<li>Endpoint: <code>/v1/jobs/jobName</code></li>
<li>Method: <code>DELETE</code></li>
<li>Example: <code>curl -L -X DELETE dkron-node:8080/v1/job/aggregate_stats</code></li>
</ul>
<p>Delete a job definition.</p>
<h2 id="manually-starting-a-job">Manually Starting a Job</h2>
<p>You can manually start a job by issuing an HTTP request.</p>
<ul>
<li>Endpoint: <code>/v1/jobs/job_name</code></li>
<li>Method: <code>POST</code> or <code>PUT</code></li>
<li>Example: <code>curl -L -X POST dkron-node:8080/v1/jobs/aggregate_stats</code></li>
</ul>
<p>Will run <code>aggregate_stats</code> job.</p>
<h2 id="get-job-executions">Get job executions</h2>
<ul>
<li>Endpoint: <code>/v1/executions/job</code></li>
<li>Method: <code>GET</code></li>
<li>Example: <code>curl -L -X GET dkron-node:8080/v1/executions/aggregate_stats</code></li>
</ul>
<p>Get a list with the job executions.</p></div>
              </div>

            

        

        <footer class="col-md-12" role="contentinfo">
            <hr>
            <div class="footer-logo">
              <img src="/img/dkron-logo-blue.png"/>
            </div>
             
                <p>© 2015 Victor Castell - victor@victorcastell.com</p>
            
            <p>Web design by <a href="http://www.collagestudio.es/">Collage Studio</a>.</p>
        </footer>

        <script src="../../js/jquery-1.10.2.min.js"></script>
        <script src="../../js/bootstrap-3.0.3.min.js"></script>
        <script src="../../js/highlight.pack.js"></script>
        <script src="../../js/base.js"></script>
        <script src="../../js/app.js"></script>
    </body>
</html>